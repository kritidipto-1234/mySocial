(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t,n){e.exports={PasswordReset:"PasswordReset_PasswordReset__heluq"}},119:function(e,t,n){},15:function(e,t,n){e.exports={ChatBox:"ChatBox_ChatBox__3S3kS",chatBoxMessage:"ChatBox_chatBoxMessage__1wEvF",chatBoxHeader:"ChatBox_chatBoxHeader__1oXn0",clearChattingWithBtn:"ChatBox_clearChattingWithBtn__2wfLM",Offline:"ChatBox_Offline__1U_FC",Online:"ChatBox_Online__3-nkK",chatMessageList:"ChatBox_chatMessageList__2vu_M",chatSender:"ChatBox_chatSender__4UWd6",container:"ChatBox_container__JVy43",chatInput:"ChatBox_chatInput__1nmQb",chatSendBtn:"ChatBox_chatSendBtn__1HLLu"}},200:function(e,t){},205:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(49),c=n.n(s),i=n(6),o=(n(119),n(8)),u=n(2),d=n.n(u),l=n(5),h=n(52),j=n(42),f=n.n(j),b=n(4),p=n.n(b),v={url:"",mobileWidth:1e3},O=n(3),x=n(23),m=n.n(x),_=n(110),g=n(44),C=n(22),w=n.n(C),k={jwtToken:null,currentUser:null,friends:[]},y={unreadChats:{},onlineUsers:[],chattingWith:null,lastChatTimes:{}},N={chat:y,user:k},F="loginUser",S="setjwtToken",L="logoutUser",P="setUnreadChats",M="setOnlineUsers",T="setFriends",E="setChattingWith",U="addUnreadChat",R="markCurrentConversationAsRead",A="setLastChatTimes",B="updateLastChatTimes",q="setUser",D={fetchUnreadChats:function(){return w()(function(){var e=Object(l.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/chats/getUnreadChats")});case 2:"success"===(a=e.sent).data.status&&t({type:P,unreadChats:a.data.unreadChats});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},fetchOnlineUsers:function(){return w()(function(){var e=Object(l.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/chats/getOnlineUsers")});case 2:"success"===(a=e.sent).data.status&&t({type:M,onlineUsers:a.data.onlineUsers});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},fetchFriends:function(){return w()(function(){var e=Object(l.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/friendships/getAllFriends")});case 2:return"success"===(a=e.sent).data.status&&t({type:T,friends:a.data.friends}),e.abrupt("return",{112:"nunu"});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},fetchLastChatTimes:function(){return w()(function(){var e=Object(l.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/chats/getLastChatTimes")});case 2:"success"===(a=e.sent).data.status&&t({type:A,lastChatTimes:a.data.lastChatTimes});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},tryFetchUserByStorageToken:function(){return function(){var e=Object(l.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/users/validateLoginToken")});case 3:if("success"!==(a=e.sent).data.status){e.next=14;break}return t({type:F,user:Object(h.a)({},a.data.user),jwtToken:a.data.jwtToken}),e.next=8,t(D.fetchUnreadChats());case 8:return e.next=10,t(D.fetchOnlineUsers());case 10:return e.next=12,t(D.fetchFriends());case 12:return e.next=14,t(D.fetchLastChatTimes());case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}()}};var I=Object(g.b)({chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=m()(e);switch(t.type){case M:n.onlineUsers=m()(t.onlineUsers);break;case P:n.unreadChats=m()(t.unreadChats);break;case E:n.chattingWith=m()(t.chattingWith);break;case U:var a=t.newChat.sender;n.unreadChats[a]?n.unreadChats[a]++:n.unreadChats[a]=1;break;case A:n.lastChatTimes=t.lastChatTimes;break;case B:n.lastChatTimes[t.friendId]=t.time;break;case R:delete n.unreadChats[String(n.chattingWith._id)];break;case L:n.unreadChats={},n.onlineUsers=[],n.chattingWith=void 0,n.lastChatTimes={}}return n},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=m()(e);switch(t.type){case F:n.currentUser=m()(t.user),n.jwtToken=t.jwtToken;break;case q:n.currentUser=m()(t.user);break;case S:n.jwtToken=t.jwtToken;break;case T:n.friends=m()(t.friends);break;case L:n.currentUser=void 0,n.jwtToken="random-invalid-jwt",n.friends=[]}return n}}),W=(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(g.d)(I,N,Object(g.c)(Object(g.a)(_.a)))),H=n.p+"static/media/Notification.ee129093.mp3",G=n(111),X=n.n(G),z=n(43),Y=n.n(z),J=n(0);var K=function(e){var t=Object(a.useContext)(V),n=Y.a.Message+" "+(t.isErrorMessage?Y.a.errorMessage:Y.a.normalMessage);return Object(J.jsxs)("div",{className:n,children:[Object(J.jsx)("button",{onClick:t.closeMessage,className:Y.a.CloseBtn,children:"X"}),t.message]})},V=r.a.createContext({message:void 0,isErrorMessage:void 0,displayMessage:function(e,t,n){},closeMessage:function(){}});function Q(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(!1),o=Object(i.a)(c,2),u=o[0],d=o[1],l=Object(a.useState)(!1),h=Object(i.a)(l,2),j=h[0],f=h[1],b=Object(a.useRef)(void 0),p=Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;clearTimeout(b.current),s(e),f(t),d(!0),b.current=setTimeout((function(){d(!1),s(""),f(!1)}),n)}),[]),v=Object(a.useCallback)((function(){d(!1),s(""),f(!1),clearTimeout(b.current)}),[]),O=Object(a.useMemo)((function(){return{message:r,isErrorMessage:j,displayMessage:p,closeMessage:v}}),[r,j,p,v]);return Object(J.jsxs)(V.Provider,{value:O,children:[e.children,u&&Object(J.jsx)(K,{})]})}var Z=r.a.createContext({socket:void 0,initializeNewSocket:function(){},removeSocket:function(){}}),$=new Audio(H);function ee(e){var t=Object(a.useState)(void 0),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(!1),o=Object(i.a)(c,2),u=(o[0],o[1]),d=Object(O.d)((function(e){return e.chat.chattingWith}),O.b),l=Object(O.d)((function(e){return e.user.currentUser}),O.b),h=Object(O.d)((function(e){return e.user.jwtToken})),j=Object(O.c)(),f=Object(a.useContext)(V).displayMessage;Object(a.useEffect)((function(){if(r)return r.on("connect",(function(){u(!0)})),r.on("connect_error",(function(e){var t=e.message;t.includes("xhr poll error")&&(t="Attempt to reconnect failed.Please check ur internet"),f(t,!0)})),r.on("auth_error",(function(e){f(e.message,!0)})),r.on("updateOnlineUserList",(function(e){j({type:M,onlineUsers:e})})),r.on("disconnect",(function(){f("Going Offline"),u(!1)})),r.io.on("reconnect",(function(){f("Reconnected.Fetching latest data "),j(D.fetchFriends()),j(D.fetchOnlineUsers()),j(D.fetchUnreadChats()),j(D.fetchLastChatTimes())})),function(){r.removeAllListeners()}}),[r,j]),Object(a.useEffect)((function(){if(r&&l)return j(D.fetchFriends()),j(D.fetchOnlineUsers()),j(D.fetchUnreadChats()),j(D.fetchLastChatTimes()),r.on("chatMessage",(function(e){var t,n=e.time;e.sender===String(l._id)&&(t=e.receiver),e.receiver===String(l._id)&&(t=e.sender),j({type:B,friendId:t,time:n}),e.sender!==String(l._id)&&$.play()})),r.on("chatMessage",(function(e){d&&String(d._id)===String(e.sender)||String(l._id)===String(e.sender)||j({type:U,newChat:e})})),function(){r.removeAllListeners("chatMessage")}}),[r,j,d,l]);var b=Object(a.useCallback)((function(){var e=X()(v.url,{auth:{jwtToken:h}});s(e)}),[h]),p=Object(a.useCallback)((function(){r.disconnect(),r.removeAllListeners(),s(void 0)}),[r]);return Object(J.jsx)(Z.Provider,{value:{socket:r,initializeNewSocket:b,removeSocket:p},children:e.children})}var te=function(){var e=Object(O.c)(),t=r.a.useRef(),n=r.a.useRef(),s=r.a.useRef(),c=r.a.useRef(),u=r.a.useRef(),j=Object(o.f)(),b=Object(a.useContext)(V),x=Object(O.d)((function(e){return e.user.currentUser}),O.b),m=Object(a.useState)("login"),_=Object(i.a)(m,2),g=_[0],C=_[1];function w(t){e({type:F,user:Object(h.a)({},t.user),jwtToken:t.jwtToken}),j.replace("/conversations")}Object(a.useEffect)((function(){x&&j.replace("/conversations")}),[x,j]);var k=function(){var e=Object(l.a)(d.a.mark((function e(a){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.preventDefault(),e.next=4,p()({withCredentials:!0,method:"POST",url:"".concat(v.url,"/api/users/signIn"),data:{email:t.current.value,password:n.current.value}});case 4:if("success"!==(r=e.sent).data.status){e.next=10;break}w(r.data),b.displayMessage("Welcome back"),e.next=11;break;case 10:throw new Error(r);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b.displayMessage(e.t0.response.data.message,!0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(d.a.mark((function e(a){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.preventDefault(),e.next=4,p()({withCredentials:!0,method:"POST",url:"".concat(v.url,"/api/users/signUp"),data:{email:t.current.value,name:c.current.value,description:u.current.value,password:n.current.value,passwordConfirm:s.current.value}});case 4:if("success"!==(r=e.sent).data.status){e.next=10;break}w(r.data),b.displayMessage("Welcome to your account"),e.next=11;break;case 10:throw new Error(r);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b.displayMessage(e.t0.response.data.message,!0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.preventDefault(),e.next=4,p()({withCredentials:!0,method:"POST",url:"".concat(v.url,"/api/users/forgotPassword"),data:{email:t.current.value}});case 4:if("success"!==(a=e.sent).data.status){e.next=9;break}b.displayMessage("Reset password mail send"),e.next=10;break;case 9:throw new Error(a);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b.displayMessage(e.t0.response.data.message,!0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsxs)("div",{className:f.a.LandingPage,children:[Object(J.jsxs)("div",{className:f.a.container,children:["login"===g&&Object(J.jsxs)("form",{onSubmit:k,children:[Object(J.jsx)("input",{ref:t,placeholder:"Email"}),Object(J.jsx)("input",{ref:n,placeholder:"Password",type:"password"}),Object(J.jsx)("button",{type:"submit",children:"Login"})]}),"signUp"===g&&Object(J.jsxs)("form",{onSubmit:y,children:[Object(J.jsx)("input",{ref:t,placeholder:"Email"}),Object(J.jsx)("input",{ref:c,placeholder:"Name"}),Object(J.jsx)("input",{ref:u,placeholder:"Description"}),Object(J.jsx)("input",{ref:n,placeholder:"Password",type:"password"}),Object(J.jsx)("input",{ref:s,placeholder:"Password Confirm",type:"password"}),Object(J.jsx)("button",{type:"submit",children:"Create Account"})]}),"forgotPassword"===g&&Object(J.jsxs)("form",{onSubmit:N,children:[Object(J.jsx)("input",{ref:t,placeholder:"Email"}),Object(J.jsx)("button",{type:"submit",children:"Send Reset Email"})]}),Object(J.jsxs)("div",{className:f.a.buttonContainer,children:["login"!==g&&Object(J.jsx)("button",{onClick:function(){return C("login")},children:"Login"}),"signUp"!==g&&Object(J.jsx)("button",{onClick:function(){return C("signUp")},children:"SignUp"}),"forgotPassword"!==g&&Object(J.jsx)("button",{onClick:function(){return C("forgotPassword")},children:"Forgot Password"})]})]}),Object(J.jsxs)("div",{className:f.a.iconCredits,children:["Icons made by"," ",Object(J.jsx)("a",{href:"https://www.flaticon.com/authors/becris",title:"Becris",children:"Becris"})," ",",",Object(J.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",children:"Freepik"}),"from"," ",Object(J.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})},ne=n(26),ae=n.n(ne),re=n(21),se=n(35),ce=n(15),ie=n.n(ce),oe=n(36),ue=n.n(oe);var de=function(e){var t;Object(O.d)((function(e){return e.user.currentUser}))._id===e.chat.sender?("Me",t="me"):(e.otherUser.name,t="other");var n=new Date(e.chat.time),a=" ".concat(n.getHours(),":").concat(n.getMinutes()," -  ").concat(n.toLocaleDateString()," ");return Object(J.jsx)("div",{className:"".concat(ue.a.chatContainer," ").concat(ue.a[t]),children:Object(J.jsxs)("div",{className:ue.a.Chat,children:[Object(J.jsx)("div",{className:ue.a.chatContent,children:e.chat.content}),Object(J.jsx)("div",{className:ue.a.chatTime,children:a})]})})},le=n(34);var he=function(){var e=Object(a.useRef)(),t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(O.d)((function(e){return e.user.currentUser}),O.b),o=Object(O.d)((function(e){return e.chat.chattingWith}),O.b),u=Object(O.d)((function(e){return e.chat.onlineUsers}),O.b),h=Object(O.d)((function(e){return e.user.jwtToken})),j=Object(a.useRef)(null),f=Object(a.useContext)(Z).socket,b=Object(O.c)(),x=Object(a.useCallback)((function(){var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"})}),[]),m=Object(a.useCallback)(w()(Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/chats/getChatsWith/").concat(o._id)});case 2:"success"===(t=e.sent).data.status&&(s(Object(se.a)(t.data.chats)),b({type:R}));case 4:case"end":return e.stop()}}),e)})))),[null===o||void 0===o?void 0:o._id]),_=Object(a.useCallback)(w()(function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({withCredentials:!0,method:"PATCH",url:"".concat(v.url,"/api/chats/markChatAsRead/").concat(t._id)});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),[]);if(Object(a.useEffect)((function(){x()}),[r.length,x]),Object(a.useEffect)((function(){if(o&&f){var e=function(e){(String(o._id)===String(e.sender)||String(c._id)===String(e.sender)&&String(o._id)===String(e.receiver))&&(s((function(t){return[].concat(Object(se.a)(t),[e])})),String(o._id)===String(e.sender)&&_(e))};return f.on("chatMessage",e),function(){return f.off("chatMessage",e)}}}),[o,_,c,f]),Object(a.useEffect)((function(){o&&(s([]),m(),e.current.focus())}),[o,m]),Object(a.useEffect)((function(){return function(){b({type:E,chattingWith:void 0})}}),[b]),!o)return Object(J.jsx)("div",{className:ie.a.ChatBox,children:Object(J.jsx)("div",{className:ie.a.chatBoxMessage,children:"Click on a user to chat with them"})});var g="Offline";return u.includes(o._id)&&(g="Online"),Object(J.jsxs)("div",{className:ie.a.ChatBox,children:[Object(J.jsxs)("div",{className:ie.a.chatBoxHeader,children:[Object(J.jsx)("button",{className:ie.a.clearChattingWithBtn,onClick:function(){b({type:E,chattingWith:null})},children:Object(J.jsx)(le.a,{})}),Object(J.jsx)("img",{src:o.photo,alt:"profile"}),Object(J.jsxs)("span",{children:[o.name||"Loading",Object(J.jsx)("br",{}),Object(J.jsx)("span",{className:ie.a[g],children:g})]})]}),Object(J.jsxs)("div",{className:ie.a.chatMessageList,children:[r.map((function(e,t){return Object(J.jsx)(de,{otherUser:o,chat:e},t)})),Object(J.jsx)("div",{ref:j})]}),Object(J.jsx)("form",{className:ie.a.chatSender,onSubmit:function(t){if(t.preventDefault(),""!==e.current.value.trim()){var n=new Date,a={sender:c._id,receiver:o._id,content:e.current.value,time:n};s((function(e){return[].concat(Object(se.a)(e),[a])})),f.emit("chatMessage",{auth:{jwtToken:h},msg:a}),b({type:B,friendId:o._id,time:n}),e.current.value="",e.current.focus()}},children:Object(J.jsxs)("div",{className:ie.a.container,children:[Object(J.jsx)("input",{className:ie.a.chatInput,placeholder:"Type message here and press send ",ref:e}),Object(J.jsx)("button",{className:ie.a.chatSendBtn,type:"submit",children:"Send"})]})})]})},je=n(30),fe=n.n(je);var be=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(O.d)((function(e){return e.chat.onlineUsers}),O.b),o=Object(O.d)((function(e){return e.chat.unreadChats}),O.b),u=Object(O.d)((function(e){return e.chat.chattingWith}),O.b),h=Object(O.c)(),j=Object(a.useCallback)(w()(Object(l.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/users/getUserDetails/").concat(e.friendId)});case 2:if("success"!==(n=t.sent).data.status){t.next=7;break}s(n.data.user),t.next=8;break;case 7:throw new Error(n);case 8:case"end":return t.stop()}}),t)})))),[]);Object(a.useEffect)((function(){j()}),[j]);var f=c.includes(e.friendId),b=o[e.friendId]||0,x=f?"online":"offline";return Object(J.jsxs)("div",{className:fe.a.FriendChatLink+" "+fe.a[x]+" "+((null===u||void 0===u?void 0:u._id)===e.friendId?fe.a.chattingWith:""),onClick:function(e){r&&h({type:E,chattingWith:r})},children:[Object(J.jsxs)("div",{className:fe.a.userLinkLeft,children:[Object(J.jsx)("img",{src:null===r||void 0===r?void 0:r.photo,alt:"DP"})," "+((null===r||void 0===r?void 0:r.name)||"Loading")+" "]}),Object(J.jsxs)("div",{className:fe.a.friendChatInfo,children:[Object(J.jsx)("span",{className:fe.a.onlineIndicator,children:" "}),"\xa0\xa0\xa0",0!==b&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(le.b,{})," ",b]})]})]})},pe=n(37),ve=n.n(pe);var Oe=function(e){var t=Object(O.d)((function(e){return e.chat.lastChatTimes}),O.b),n=Object(a.useState)(""),r=Object(i.a)(n,2),s=r[0],c=r[1],o=Object(a.useState)(void 0),u=Object(i.a)(o,2),h=u[0],j=u[1];Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/friendships/getAllFriendNames")});case 3:if("success"!==(t=e.sent).data.status){e.next=8;break}j(t.data.friendNames),e.next=9;break;case 8:throw new Error(t);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var f=Object(se.a)(e.friends);return Object(J.jsxs)("div",{className:ve.a.AllFriendsChatList,children:[Object(J.jsxs)("div",{className:ve.a.sectionHeader,children:["My Friends",Object(J.jsx)("input",{className:ve.a.friendFilter,onChange:function(e){c(e.target.value)},placeholder:"\ud83d\udd0d Filter by name"})]}),Object(J.jsxs)("div",{className:ve.a.userList,children:[f.filter((function(e){var t;return""===s||!h||(null===(t=h[e])||void 0===t?void 0:t.includes(s.toLowerCase()))})).sort((function(e,n){if(t[e]&&!t[n])return-1;if(!t[e]&&t[n])return 1;if(!t[e]&&!t[n])return 0;var a=new Date(t[e]),r=new Date(t[n]);return a>r?-1:a<r?1:a===r?0:void 0})).map((function(e){return Object(J.jsx)(be,{friendId:e},e)})),0===f.length&&Object(J.jsx)("div",{className:ve.a.noFriendMessage,children:"You have no friends .Go to your profile and send friend requests to other users"})]})]})},xe=n(206);var me=function(e){var t,n=Object(O.c)(),r=Object(O.d)((function(e){return e.user.currentUser}),O.b),s=Object(O.d)((function(e){return e.chat.chattingWith}),O.b),c=Object(a.useContext)(Z),i=Object(O.d)((function(e){return e.user.friends}),O.b);return Object(a.useContext)(V).displayMessage,Object(a.useEffect)((function(){r&&(n(D.fetchFriends()),n(D.fetchOnlineUsers()),n(D.fetchUnreadChats()),n(D.fetchLastChatTimes()))}),[n,r]),r?Object(J.jsxs)("div",{className:ae.a.Conversations,children:[Object(J.jsxs)("div",{className:ae.a.navbar,children:[Object(J.jsx)("div",{className:ae.a.pageHeader,children:"Conversations"}),Object(J.jsxs)("div",{className:ae.a.activeUser,children:[Object(J.jsx)("img",{src:r.photo,alt:"Profile"}),Object(J.jsx)(re.b,{className:ae.a.profileLink,to:"/myProfile",children:r.name.split(" ")[0]})]})]}),Object(J.jsxs)("div",{className:ae.a.Container,children:[!c.socket&&Object(J.jsx)("h1",{children:"Establishing live chat connection"}),c.socket&&!c.socket.connected&&Object(J.jsxs)("div",{className:ae.a.notConnectedMessage,children:[" ","You are not connected to the internet"," "]}),c.socket&&(null===(t=c.socket)||void 0===t?void 0:t.connected)&&Object(J.jsxs)(J.Fragment,{children:[(window.outerWidth>=v.mobileWidth||!s)&&Object(J.jsx)(Oe,{friends:i}),(window.outerWidth>=v.mobileWidth||s)&&Object(J.jsx)(he,{})]})]})]}):Object(J.jsx)("div",{className:ae.a.Conversations,children:Object(J.jsx)("div",{className:"spinner",children:Object(J.jsx)(xe.a,{className:"spinner",enabled:!r})})})},_e=n(9),ge=n.n(_e),Ce=n(113),we=n.n(Ce);n(174);var ke;n(95),n(176);var ye=function(e){var t=Object(O.d)((function(e){return e.user.currentUser}),O.b),n=Object(a.useState)("display"),r=Object(i.a)(n,2),s=r[0],c=r[1],u=Object(a.useState)(!1),h=Object(i.a)(u,2),j=h[0],f=h[1],b=Object(a.useState)(void 0),x=Object(i.a)(b,2),m=x[0],_=x[1],g=Object(a.useState)(0),C=Object(i.a)(g,2),w=C[0],k=C[1],y=Object(a.useState)(void 0),N=Object(i.a)(y,2),F=N[0],S=N[1],P=Object(O.c)(),M=Object(o.f)(),T=Object(a.useContext)(V),E=Object(a.useContext)(Z),U=Object(a.useRef)(),R=Object(a.useRef)(),A=Object(a.useRef)(),B=Object(a.useRef)(),D=Object(a.useRef)(),I=Object(a.useRef)(),W=Object(a.useRef)(),H=Object(a.useRef)(),G=Object(a.useRef)();Object(a.useEffect)((function(){(function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/users/getUserDetails/").concat(t._id)});case 2:if("success"!==(n=e.sent).data.status){e.next=7;break}P({type:q,user:n.data.user}),e.next=8;break;case 7:throw new Error(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[P,t._id]),Object(a.useEffect)((function(){"display"!==s&&0!==w&&(ke&&ke.destroy(),ke=new we.a(G.current,{aspectRatio:1,zoomable:!1,scalable:!1,crop:function(){var e=ke.getCroppedCanvas();_(e.toDataURL())}}))}),[s,w]);var X=function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T.displayMessage("Updating...",!1,1e4),e.next=4,p()({withCredentials:!0,method:"PATCH",url:"".concat(v.url,"/api/users/editMyAccount"),data:t});case 4:if(n=e.sent,ke&&ke.destroy(),k(0),c("display"),S(void 0),_(void 0),"success"!==n.data.status){e.next=15;break}T.displayMessage("Profile Updated"),P({type:q,user:n.data.user}),e.next=16;break;case 15:throw new Error(n);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),T.displayMessage(e.t0.response.data.message,!0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();function z(e){e.target!==D.current&&e.target!==I.current||f(!1)}var Y=function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,p()({withCredentials:!0,method:"DELETE",url:"".concat(v.url,"/api/users/deleteAccount"),data:{password:W.current.value}});case 4:T.displayMessage("Account Deleted"),P({type:L}),M.replace("/"),E.removeSocket(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),T.displayMessage(e.t0.response.data.message,!0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsxs)("div",{className:ge.a.AccountSection,children:[Object(J.jsx)("div",{className:ge.a.heading,children:"Account Details"}),Object(J.jsxs)("div",{className:ge.a.content,children:[Object(J.jsxs)("div",{className:ge.a.detailField,children:[Object(J.jsx)("span",{children:Object(J.jsx)("b",{children:"Profile Pic : "})}),Object(J.jsx)("br",{}),"display"===s&&Object(J.jsx)("img",{className:ge.a.profilePic,src:t.photo,alt:"Profile Pic"}),"edit"===s&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("img",{className:ge.a.croppedPic,src:m,alt:"Cropped Preview"}),Object(J.jsx)("br",{}),Object(J.jsx)("div",{className:ge.a.cropperContainer,children:Object(J.jsx)("img",{ref:G,src:F,alt:"Nothing selected",className:ge.a.cropper,onLoad:function(){k((function(e){return e+1}))}})}),Object(J.jsx)("input",{onChange:function(){var e;if(!(null===(e=H.current.files[0])||void 0===e?void 0:e.type.startsWith("image")))return T.displayMessage("Please just upload image files",!0);var t=URL.createObjectURL(H.current.files[0]);_(t),S(t)},ref:H,accept:"image/*",type:"file"})]})]}),Object(J.jsxs)("div",{className:ge.a.detailField,children:[Object(J.jsx)("span",{children:Object(J.jsx)("b",{children:"Name : "})}),"display"===s&&t.name,"edit"===s&&Object(J.jsx)("input",{ref:U,placeholder:t.name})]}),Object(J.jsxs)("div",{className:ge.a.detailField,children:[Object(J.jsx)("span",{children:Object(J.jsx)("b",{children:"Email : "})}),"display"===s&&t.email,"edit"===s&&Object(J.jsx)("input",{ref:R,placeholder:t.email})]}),Object(J.jsxs)("div",{className:ge.a.detailField,children:[Object(J.jsx)("span",{children:Object(J.jsx)("b",{children:"Description : "})}),"display"===s&&t.description,"edit"===s&&Object(J.jsx)("input",{ref:A,placeholder:t.description})]}),"edit"===s&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{children:[Object(J.jsx)("span",{children:Object(J.jsx)("b",{children:"Password "})}),Object(J.jsx)("input",{ref:B,placeholder:"Current Password required",type:"password"})]}),Object(J.jsx)("button",{onClick:function(e){e.preventDefault(),ke&&ke.destroy(),k(0),c("display"),_(void 0),S(void 0)},children:"Cancel"}),Object(J.jsx)("button",{onClick:function(e){e.preventDefault();var t=new FormData;t.append("name",U.current.value),t.append("email",R.current.value),t.append("description",A.current.value),t.append("password",B.current.value),m&&t.append("photo",function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(t.length),r=0;r<t.length;r++)a[r]=t.charCodeAt(r);return new Blob([a],{type:n})}(m)),X(t)},children:"Save changes"})]}),"display"===s&&Object(J.jsx)("button",{onClick:function(e){e.preventDefault(),c("edit")},children:"Edit Account"}),"display"===s&&Object(J.jsx)("button",{onClick:function(){f(!0)},children:"Delete Account"}),j&&Object(J.jsx)("div",{ref:D,onClick:z,className:ge.a.overlay,children:Object(J.jsxs)("form",{onSubmit:Y,className:ge.a.deleteForm,children:["Enter your password to confirm delete",Object(J.jsx)("input",{ref:W,placeholder:"Password required",type:"password"}),Object(J.jsx)("button",{className:ge.a.deleteFormBtn,ref:I,onClick:z,type:"button",children:"Cancel"}),Object(J.jsx)("button",{type:"submit",children:"Confirm"})]})})]})]})},Ne=n(53),Fe=n.n(Ne),Se=n(68),Le=n.n(Se);var Pe=function(e){var t=Object(a.useState)(void 0),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(a.useContext)(Ye).changeRenderToken,o=Object(a.useContext)(V).displayMessage;Object(a.useEffect)((function(){(function(){var t=Object(l.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/users/getUserDetails/").concat(e.userId)});case 3:if("success"!==(n=t.sent).data.status){t.next=8;break}s(n.data.user),t.next=9;break;case 8:throw new Error(n);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),o("Unable to fetch user info",!0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}})()()}),[e.userId,o]);var u=function(){var t=Object(l.a)(d.a.mark((function t(n){var a,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.preventDefault(),r){t.next=4;break}return t.abrupt("return",o("User hasnt loaded yet",!0));case 4:return t.next=6,p()({withCredentials:!0,method:"POST",url:"".concat(v.url,"/api/friendships/sendFriendRequest"),data:{targetId:e.userId}});case 6:if("success"!==(a=t.sent).data.status){t.next=14;break}return o("Friend Request send"),t.next=11,e.fetchNonFriends();case 11:c(),t.next=15;break;case 14:throw new Error(a);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),o((null===(s=t.t0.response)||void 0===s?void 0:s.data.message)+" Couldnt send friend request",!0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}();return Object(J.jsxs)("div",{className:Le.a.NonFriend,children:[Object(J.jsxs)("div",{className:Le.a.leftSide,children:[Object(J.jsx)("img",{alt:"DP",src:null===r||void 0===r?void 0:r.photo}),(null===r||void 0===r?void 0:r.name)||"Loading"]}),Object(J.jsx)("button",{onClick:u,children:"Request"})]})};var Me=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(a.useContext)(Ye).renderToken,o=Object(a.useContext)(V).displayMessage,u=Object(a.useCallback)(Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/friendships/getAllNonFriends")});case 3:if("success"!==(t=e.sent).data.status){e.next=8;break}s(t.data.nonFriends),e.next=9;break;case 8:throw new Error(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),o(e.t0.response.data.message,!0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[o]);return Object(a.useEffect)((function(){u()}),[u,c]),Object(J.jsxs)("div",{className:Fe.a.AllNonFriends,children:[Object(J.jsx)("div",{className:Fe.a.listHeading,children:"All Users"}),Object(J.jsx)("div",{className:Fe.a.nonFriendsList,children:r.map((function(e){return Object(J.jsx)(Pe,{userId:e,fetchNonFriends:u},e)}))})]})},Te=n(24),Ee=n.n(Te),Ue=n(54),Re=n.n(Ue),Ae=n(55),Be=n.n(Ae);var qe=function(e){var t=Object(a.useState)(void 0),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(O.c)(),o=Object(a.useContext)(V).displayMessage,u=Object(a.useContext)(Ye).changeRenderToken;Object(a.useEffect)((function(){(function(){var t=Object(l.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/users/getUserDetails/").concat(e.userId)});case 3:if("success"!==(n=t.sent).data.status){t.next=8;break}s(n.data.user),t.next=9;break;case 8:throw new Error(n);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),o("Failed to fetch friend info",!0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}})()()}),[e.userId,o]);var h=function(){var e=Object(l.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),r){e.next=4;break}return e.abrupt("return",o("Friend loading",!0));case 4:return e.next=6,p()({withCredentials:!0,method:"DELETE",url:"".concat(v.url,"/api/friendships/deleteFriend"),data:{friendId:r._id}});case 6:if("success"!==(n=e.sent).data.status){e.next=14;break}return o("Friend Deleted"),e.next=11,c(D.fetchFriends());case 11:u(),e.next=15;break;case 14:throw new Error(n);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),o("Failed to delete friend "+(null===(a=e.t0.response)||void 0===a?void 0:a.data.message),!0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsxs)("div",{className:Be.a.Friend,children:[Object(J.jsxs)("div",{className:Be.a.leftSide,children:[Object(J.jsx)("img",{src:null===r||void 0===r?void 0:r.photo,alt:"profile"}),(null===r||void 0===r?void 0:r.name)||"loading"]}),Object(J.jsx)("button",{className:Be.a.negativeBtn,onClick:h,children:"Delete"})]})};var De=function(e){var t=Object(O.d)((function(e){return e.user.friends}),O.b),n=Object(O.c)(),r=Object(a.useContext)(Ye).renderToken;return Object(a.useEffect)((function(){n(D.fetchFriends())}),[n,r]),Object(J.jsxs)("div",{className:Re.a.MyFriends,children:[Object(J.jsx)("div",{className:Re.a.listHeading,children:"My Friends"}),Object(J.jsx)("div",{className:Re.a.friendsList,children:t.map((function(e){return Object(J.jsx)(qe,{userId:e},e)}))})]})},Ie=n(56),We=n.n(Ie),He=n(57),Ge=n.n(He);var Xe=function(e){var t=Object(a.useState)(void 0),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(a.useContext)(Ye).changeRenderToken,o=Object(a.useContext)(V).displayMessage;Object(a.useEffect)((function(){(function(){var t=Object(l.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/users/getUserDetails/").concat(e.request.sender)});case 3:if("success"!==(n=t.sent).data.status){t.next=8;break}s(n.data.user),t.next=9;break;case 8:throw new Error(n);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),o("Failed to load friend request sender",!0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}})()()}),[e.request.sender,o]);var u=function(){var t=Object(l.a)(d.a.mark((function t(n,a){var s,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),r){t.next=4;break}return t.abrupt("return",o("Request loading details",!0));case 4:return t.next=6,p()({withCredentials:!0,method:"POST",url:"".concat(v.url,"/api/friendships/acknowledgeFriendRequest/").concat(e.request._id),data:{type:n}});case 6:if("success"!==(s=t.sent).data.status){t.next=14;break}return o("Friend request ".concat(n,"ed")),t.next=11,e.getPendingFriendRequests();case 11:c(),t.next=15;break;case 14:throw new Error(s);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),o("Friend request ".concat(n," failed ")+(null===(i=t.t0.response)||void 0===i?void 0:i.data.message),!0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(J.jsxs)("div",{className:Ge.a.PendingRequest,children:[Object(J.jsxs)("div",{className:Ge.a.leftSide,children:[Object(J.jsx)("img",{src:null===r||void 0===r?void 0:r.photo,alt:"DP"}),(null===r||void 0===r?void 0:r.name)||"loading"]}),Object(J.jsxs)("div",{children:[Object(J.jsx)("button",{onClick:u.bind(null,"accept"),children:"Accept"}),Object(J.jsx)("button",{className:Ge.a.negativeBtn,onClick:u.bind(null,"reject"),children:"Reject"})]})]})};var ze=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(a.useContext)(V).displayMessage,o=Object(a.useContext)(Ye).renderToken,u=Object(a.useCallback)(Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/friendships/getPendingFriendRequests")});case 3:if("success"!==(t=e.sent).data.status){e.next=8;break}s(t.data.pendingRequests),e.next=9;break;case 8:throw new Error(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c("Failed to fetch Pending requests",!0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[c]);return Object(a.useEffect)((function(){u()}),[u,o]),Object(J.jsxs)("div",{className:We.a.PendingRequestList,children:[Object(J.jsx)("div",{className:We.a.listHeading,children:"Pending Requests"}),Object(J.jsx)("div",{className:We.a.requestList,children:r.map((function(e){return Object(J.jsx)(Xe,{request:e,getPendingFriendRequests:u},e._id)}))})]})},Ye=r.a.createContext({renderToken:null,changeRenderToken:function(){}});var Je=function(e){var t=Object(O.d)((function(e){return e.user.currentUser}),O.b),n=Object(O.d)((function(e){return e.chat.unreadChats}),O.b),r=Object(O.c)(),s=Object(o.f)(),c=Object(a.useContext)(Z),u=Object(a.useState)(0),h=Object(i.a)(u,2),j=h[0],f=h[1],b=Object(a.useContext)(V).displayMessage,x=function(){var e=Object(l.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,p()({withCredentials:!0,method:"GET",url:"".concat(v.url,"/api/users/logout")});case 4:if("success"!==(n=e.sent).data.status){e.next=11;break}r({type:L}),s.replace("/"),c.removeSocket(),e.next=12;break;case 11:throw new Error(n);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),b("Failed to logout "+(null===(a=e.t0.response)||void 0===a?void 0:a.data.message),!0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),m=Object(a.useCallback)((function(){f((function(e){return 1-e}))}),[]);if(!t)return Object(J.jsxs)("div",{className:Ee.a.MyProfile,children:[Object(J.jsx)("div",{className:"spinner",children:Object(J.jsx)(xe.a,{className:"spinner",enabled:!t})})," "]});var _=Object.values(n).reduce((function(e,t){return e+t}),0);return Object(J.jsxs)("div",{className:Ee.a.MyProfile,children:[Object(J.jsxs)("div",{className:Ee.a.navbar,children:[Object(J.jsxs)(re.b,{className:Ee.a.navBarBtn,to:"/conversations",children:["Conversations ",0!==_&&Object(J.jsxs)(J.Fragment,{children:["\xa0",Object(J.jsx)(le.b,{}),"\xa0",_]})]}),Object(J.jsx)("button",{className:Ee.a.navBarBtn,onClick:x,children:"Logout"})]}),Object(J.jsxs)("div",{className:Ee.a.content,children:[Object(J.jsxs)("div",{className:Ee.a.friendSection,children:[Object(J.jsx)("div",{className:Ee.a.heading,children:"Friend Section"}),Object(J.jsx)("div",{className:Ee.a.friendSectionFlexContainer,children:Object(J.jsxs)(Ye.Provider,{value:{renderToken:j,changeRenderToken:m},children:[Object(J.jsx)(Me,{}),Object(J.jsx)(De,{}),Object(J.jsx)(ze,{})]})})]}),Object(J.jsx)(ye,{})]})]})},Ke=n(114),Ve=n.n(Ke);var Qe=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),r=Object(o.f)(),s=Object(o.h)(),c=Object(a.useContext)(V),i=function(){var e=Object(l.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.preventDefault(),e.next=4,p()({withCredentials:!0,method:"PATCH",url:"".concat(v.url,"/api/users/resetPassword/").concat(s.passwordResetToken),data:{password:t.current.value,passwordConfirm:n.current.value}});case 4:"success"===e.sent.data.status&&(c.displayMessage("Password Successfully changed "),r.replace("/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c.displayMessage(e.t0.response.data.message,!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsx)("div",{className:Ve.a.PasswordReset,children:Object(J.jsxs)("form",{onSubmit:i,children:[Object(J.jsx)("b",{children:"Password Reset"}),Object(J.jsx)("input",{ref:t,placeholder:"New Password",type:"password"}),Object(J.jsx)("input",{ref:n,placeholder:"New Password Confirm",type:"password"}),Object(J.jsx)("button",{children:"Reset Paassword"})]})})};function Ze(e,t){return(null===e||void 0===e?void 0:e._id)===(null===t||void 0===t?void 0:t._id)}var $e=function(){var e=Object(O.c)(),t=Object(a.useContext)(Z).initializeNewSocket,n=Object(O.d)((function(e){return e.user.currentUser}),Ze),r=Object(o.g)(),s=Object(a.useState)(!r.pathname.includes("resetPassword")),c=Object(i.a)(s,2),u=c[0],d=c[1];return Object(a.useEffect)((function(){r.pathname.includes("resetPassword")||e(D.tryFetchUserByStorageToken()).then((function(){return d(!1)})).catch((function(){d(!1),e({type:L})}))}),[e]),Object(a.useEffect)((function(){n&&t()}),[n,t]),u?Object(J.jsx)("div",{className:"spinner",children:Object(J.jsx)(xe.a,{className:"spinner",enabled:u})}):Object(J.jsx)("div",{className:"App",children:Object(J.jsxs)(o.c,{children:[Object(J.jsx)(o.a,{path:"/",exact:!0,component:te}),Object(J.jsx)(o.a,{path:"/conversations",exact:!0,component:me}),Object(J.jsx)(o.a,{path:"/myProfile",exact:!0,component:Je}),Object(J.jsx)(o.a,{path:"/resetPassword/:passwordResetToken",exact:!0,component:Qe})]})})};c.a.render(Object(J.jsx)(O.a,{store:W,children:Object(J.jsx)(Q,{children:Object(J.jsx)(ee,{children:Object(J.jsx)(re.a,{children:Object(J.jsx)($e,{})})})})}),document.getElementById("root"))},22:function(e,t){e.exports=function(e){return function(){return e.apply(void 0,arguments).catch((function(e){}))}}},24:function(e,t,n){e.exports={MyProfile:"MyProfile_MyProfile__2ySoo",navbar:"MyProfile_navbar__3iNbE",navBarBtn:"MyProfile_navBarBtn__170iT",content:"MyProfile_content__KunNE",friendSection:"MyProfile_friendSection__WsbPJ",heading:"MyProfile_heading__39Ul2",friendSectionFlexContainer:"MyProfile_friendSectionFlexContainer__2FMjK"}},26:function(e,t,n){e.exports={Conversations:"Conversations_Conversations__1C3_0",navbar:"Conversations_navbar__LriyT",pageHeader:"Conversations_pageHeader__1XPZ5",activeUser:"Conversations_activeUser__13znk",profileLink:"Conversations_profileLink__2N8tR",allUsers:"Conversations_allUsers__1Bavo",Container:"Conversations_Container__1Ew7K",notConnectedMessage:"Conversations_notConnectedMessage__21g_d",userList:"Conversations_userList__2r2Jl"}},30:function(e,t,n){e.exports={FriendChatLink:"FriendChatLink_FriendChatLink__2HNVX",chattingWith:"FriendChatLink_chattingWith__hCZAO",userLinkLeft:"FriendChatLink_userLinkLeft__AOFjA",friendChatInfo:"FriendChatLink_friendChatInfo__3qMM1",onlineIndicator:"FriendChatLink_onlineIndicator__1Ljf9",onlineText:"FriendChatLink_onlineText__3vOcL",online:"FriendChatLink_online__1GI5T",offline:"FriendChatLink_offline__3DLL7"}},36:function(e,t,n){e.exports={chatContainer:"Chat_chatContainer__3ad6y",Chat:"Chat_Chat__Pq_Hw",chatContent:"Chat_chatContent__5ItBb",chatTime:"Chat_chatTime__vW_F9",other:"Chat_other__CFtye",me:"Chat_me__2hYTr"}},37:function(e,t,n){e.exports={AllFriendsChatList:"AllFriendsChatList_AllFriendsChatList__HWlEK",sectionHeader:"AllFriendsChatList_sectionHeader__184UO",friendFilter:"AllFriendsChatList_friendFilter__2Py5r",userList:"AllFriendsChatList_userList__1eEW4",noFriendMessage:"AllFriendsChatList_noFriendMessage__3sXEm"}},42:function(e,t,n){e.exports={LandingPage:"LandingPage_LandingPage__2CFiz",container:"LandingPage_container__3x6z_",buttonContainer:"LandingPage_buttonContainer__2Vkf1",iconCredits:"LandingPage_iconCredits__2FBh9"}},43:function(e,t,n){e.exports={Message:"Message_Message__QbclZ",CloseBtn:"Message_CloseBtn__13vvQ",errorMessage:"Message_errorMessage__1ynAq",normalMessage:"Message_normalMessage__1ohMv"}},53:function(e,t,n){e.exports={AllNonFriends:"AllNonFriends_AllNonFriends__TA46F",listHeading:"AllNonFriends_listHeading__o5OBY",nonFriendsList:"AllNonFriends_nonFriendsList__6wS17"}},54:function(e,t,n){e.exports={MyFriends:"MyFriends_MyFriends__2k6Hx",listHeading:"MyFriends_listHeading__3Gw8L",friendsList:"MyFriends_friendsList__174EN"}},55:function(e,t,n){e.exports={Friend:"Friend_Friend__2SYsy",leftSide:"Friend_leftSide__251CC",negativeBtn:"Friend_negativeBtn__22SnI"}},56:function(e,t,n){e.exports={PendingRequestList:"PendingRequestList_PendingRequestList__cJIUs",listHeading:"PendingRequestList_listHeading__5a1kv",requestList:"PendingRequestList_requestList__3kCm4"}},57:function(e,t,n){e.exports={PendingRequest:"PendingRequest_PendingRequest__4EhXp",leftSide:"PendingRequest_leftSide__2uhQo",negativeBtn:"PendingRequest_negativeBtn__HCIYA"}},68:function(e,t,n){e.exports={NonFriend:"NonFriend_NonFriend__Ny7qA",leftSide:"NonFriend_leftSide__2_luz"}},9:function(e,t,n){e.exports={AccountSection:"AccountSection_AccountSection__1xA4I",heading:"AccountSection_heading__10cfM",content:"AccountSection_content__2ihkc",detailField:"AccountSection_detailField__1rLPg",profilePic:"AccountSection_profilePic__1Kq8G",croppedPic:"AccountSection_croppedPic__2ow0u",cropperContainer:"AccountSection_cropperContainer__2za6g",cropper:"AccountSection_cropper__2j3nY",overlay:"AccountSection_overlay__164Fu",deleteForm:"AccountSection_deleteForm__Nl6go"}}},[[205,1,2]]]);
//# sourceMappingURL=main.28e3aaac.chunk.js.map